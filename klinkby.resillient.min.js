(function(n){"use strict";function u(n){var i,t;if(null===n||"object"!=typeof n)return n;i=n.constructor();for(t in n)n.hasOwnProperty(t)&&(i[t]=u(n[t]));return i}function f(n,t){return function(){t.apply(n,arguments)}}function i(n,t,r){var u=i.defaults;this.retries=n||u.retries,this.pauseMilliSeconds=t||u.pauseMilliSeconds,this.pauseExponentBase=r||u.pauseExponentBase}function r(n,t,i,u){var f=r.defaults||{};this.headers=n||f.headers,this.resillience=t||f.resillience.clone(),this.user=i||f.user,this.password=u||f.password}function t(n,i,r,u){var f=t.defaults||{};this.url=n||f.url,this.method=i||f.method,this.body=r||f.body,this.options=u||f.options.clone(),this.retries=0}i.defaults=new i(3,100,7),i.prototype.clone=function(){return new i(this.retries,this.pauseMilliSeconds,this.pauseIncrementalFactor)},r.defaults=new r({Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},i.defaults,null,null),r.prototype.clone=function(){return new r(u(this.headers),this.resillience.clone(),this.user,this.password)},t.defaults=new t(null,"GET",null,r.defaults),t.prototype.send=function(){var t=this.xhr=new n.XMLHttpRequest,i=this.options,u=i.headers,r;t.open(this.method,this.url,!0,i.user,i.password);for(r in u)u.hasOwnProperty(r)&&t.setRequestHeader(r,u[r]);t.onreadystatechange=f(this,this.readystatechange),t.send(i.body)},t.prototype.readystatechange=function(){var n=this.xhr,t;if(4===n.readyState){if(0===n.status)try{if(this.noResponse())return}catch(i){this.error(n,i&&i.message,i)}if(0!==n.status&&n.status<400){this.success(n.response,n.statusText,n);return}this.error(n,n.statusText)}},t.prototype.noResponse=function(){var t=this.options.resillience,i,r=this.options.resillience.retries;return this.retries<r?(i=t.pauseMilliSeconds*Math.pow(t.pauseExponentBase,this.retries),n.setTimeout(f(this,this.send),i),this.retries+=1,!0):!1},t.prototype.success=function(){},t.prototype.error=function(){},undefined!==n.define?n.define(function(){return t}):n.ResillientRequest=t})(this)